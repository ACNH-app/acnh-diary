# 네비게이션/UX 개편안 (도감 + 레시피 + 가이드 확장 대응)

- 작성일: 2026-02-15
- 대상: 현재 `FastAPI + SPA(static)` 구조
- 목적: 데이터/콘텐츠 확장(생물도감, 레시피, 공략글) 이후에도 탐색성과 유지보수성을 확보

## 1. 문제 정의

현재 구조는 카테고리 확장 전제로는 빠르지만, 다음 이슈가 커짐:

1. 상단 탭이 늘어나면 가로 공간 부족(특히 모바일)
2. “수집형 데이터”와 “읽기형 콘텐츠(가이드)”가 같은 탐색 레벨에 섞임
3. URL이 고정되어 화면 공유/뒤로가기/복원 UX가 약함

## 2. 목표

1. 1차/2차 네비게이션 분리
2. 수집형/콘텐츠형 정보구조 분리
3. 모바일 우선 탐색 패턴 도입
4. 라우팅 확장 가능한 프론트 구조 확보

## 3. 제안 정보구조(IA)

### 1차 네비게이션

1. 홈
2. 도감
3. 카탈로그
4. 주민
5. 가이드
6. 캘린더
7. 설정

### 2차 서브 네비게이션

1. 도감
- 곤충
- 물고기
- 해산물
- 화석
- 미술품

2. 카탈로그
- 가구
- 인테리어
- 옷
- 잡화
- 도구
- 토용
- 사진
- 레시피

3. 가이드
- 꽃 교배
- 스토리 진행
- 캠노 꿀팁
- 이노 꿀팁
- 기타 공략

## 4. 와이어프레임 (텍스트)

### 데스크톱

```text
┌─────────────────────────────────────────────────────┐
│ Logo  [홈][도감][카탈로그][주민][가이드][캘린더][설정] │  ← 1차 네비
├─────────────────────────────────────────────────────┤
│ [서브탭1][서브탭2][서브탭3] ...                     │  ← 2차 네비
├─────────────────────────────────────────────────────┤
│ 검색/필터/정렬                                      │
├─────────────────────────────────────────────────────┤
│ 카드 그리드 / 리스트                                │
└─────────────────────────────────────────────────────┘
```

### 모바일(아이패드 세로 포함)

```text
┌──────────────────────────┐
│ 상단: 페이지 제목 + 서브탭 │
├──────────────────────────┤
│ 본문(검색/필터/목록)      │
├──────────────────────────┤
│ 하단탭: 홈 도감 카탈 주민 가이드 │  ← 핵심 5개
└──────────────────────────┘
```

## 5. UI 규칙

1. 목록형 화면 공통 레이아웃 통일
- `검색` + `필터` + `정렬` + `상태탭` + `결과리스트`

2. 공략(가이드)은 카드형 피드 + 상세 문서 뷰
- 데이터형 도감/카탈로그와 시각적 구분

3. 상세는 공통 모달을 유지하되, 콘텐츠 페이지는 라우트 기반 상세로 분리

4. 네비 명칭 길이 제한
- 모바일 하단탭 라벨 2~4자 권장

## 6. 파일 수정 계획 (현재 코드 기준)

### 1차: 네비 설정/상태 분리

1. `static/js/state.js`
- `activeMode` 외에 `activeSubMode`(2차 탭) 도입
- 모드별 서브탭 상태 저장 구조 추가

2. `static/js/render.js`
- 상단 1차 네비 + 2차 서브탭 렌더 함수 분리
- 모드별 패널 전환 로직 정리

3. `static/js/data.js`
- 모드/서브모드 조합별 데이터 로딩 분기 추가

4. `static/index.html`
- 2차 네비 영역 DOM 추가
- 모바일 하단탭 DOM 추가(또는 동적 렌더 영역)

### 2차: 라우팅 연계

1. `static/app.js`
- `location.hash` 또는 history API 기반 라우팅 초기화
- 라우트 -> `activeMode/activeSubMode` 동기화

2. `static/js/events.js`
- 탭 클릭 시 URL 업데이트
- 뒤로가기(popstate/hashchange) 핸들링

### 3차: 콘텐츠(가이드) 탭 추가

1. 백엔드
- `app/api/meta.py` 또는 신규 라우터에 가이드 목록/상세 API 추가

2. 프론트
- `static/js/guide.js` 신규
- 가이드 목록/상세 렌더 분리

## 7. 단계별 구현 순서

1. 네비 2단계 구조 도입 (URL 변경 없이)
2. 도감/카탈로그/가이드 탭만 우선 연결
3. URL 라우팅 연결
4. 모바일 하단탭 적용
5. 최종 접근성/회귀 점검

## 8. 검증 체크리스트

1. 1차 탭 전환 시 2차 탭이 맞게 갱신되는가
2. 2차 탭 전환 시 데이터가 정확히 분기되는가
3. 모바일에서 탭이 줄바꿈 없이 사용 가능한가
4. 뒤로가기/새로고침 후 동일 화면 복원되는가
5. 기존 주민/카탈로그 기능 회귀가 없는가

## 9. 리스크 및 대응

1. 리스크: 상태 분기 복잡도 증가
- 대응: 모드-서브모드 매핑을 상수 테이블로 관리

2. 리스크: 기존 이벤트 핸들러 충돌
- 대응: `events.js`를 모듈별 바인더로 분리

3. 리스크: 초기 렌더 지연
- 대응: 모드 진입 시점 지연 로딩(lazy import) 검토

## 10. 결론

현재 구조를 폐기하지 않고, **2단 네비 + 라우팅 추가**로 확장하는 것이 가장 비용 대비 효과가 좋다.
데이터 확장 후에도 운영 가능한 형태로 가려면 이 개편을 우선 진행하는 것이 권장된다.

## 11. IA 확정 메모

2026-02-15 결정:

1. `토용`은 `카탈로그` 그룹에 포함
2. `사진`은 `카탈로그` 그룹에 포함
